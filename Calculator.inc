#IFNDEF CALCULATOR_HEADER
#DEFINE CALCULATOR_HEADER
#INCLUDE"CALCULATOR_KEYBOARD_HEADER.inc"
#INCLUDE"CALCULATOR_DISPLAY_HEADER.inc"  
#INCLUDE"CALCULATOR_OPERATION_HEADER.inc"    
  

 BANK0 MACRO
 BCF STATUS, RP1;RP1:RP0
 BCF STATUS, RP0
 ENDM

 BANK1 MACRO
 BCF STATUS, RP1;RP1:RP0
 BSF STATUS, RP0
 ENDM

 BANK2 MACRO
 BSF STATUS, RP1;RP1:RP0
 BCF STATUS, RP0
 ENDM

 BANK3 MACRO
 BSF STATUS, RP1;RP1:RP0
 BSF STATUS, RP0
 ENDM
P0 MACRO AUX
    
    MOVLW B'00111111'
    MOVWF AUX
    ENDM 
P1 MACRO AUX
    MOVLW B'00000110'
    MOVWF AUX
    ENDM
P2 MACRO AUX
    MOVLW B'01011011'
    MOVWF AUX
    ENDM
P3 MACRO AUX
    MOVLW B'01001111'
    MOVWF AUX
    ENDM
P4 MACRO AUX
    MOVLW B'01100110'
    MOVWF AUX
    ENDM
P5 MACRO AUX
    MOVLW B'01101101'
    MOVWF AUX
    ENDM
P6 MACRO AUX
    MOVLW B'01111100'
    MOVWF AUX
    ENDM
P7 MACRO AUX
    MOVLW B'00000111'
    MOVWF AUX
    ENDM
P8 MACRO AUX
    MOVLW B'01111111'
    MOVWF AUX
    ENDM
P9 MACRO AUX
    MOVLW B'01100111'
    MOVWF AUX
    ENDM    
    
    BANK1 ;76543210
    CLRF TRISB
    
    MOVLW B'00001111'
    MOVWF TRISD
    CLRF CHECK
    BCF COUNT_U,0
    BCF COUNT_D,0
    BANK0
    ;primeira coluna
    BCF PORTB,RB0;147*
    BTFSS TRISD,RD0
    CALL SOMA
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD1
    CALL MOV7
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD2
    CALL MOV4
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD3
    CALL MOV1
    CALL DELAY_1MS
    CALL DELAY_1MS 
    BSF PORTB,RB0
    CALL DELAY_1MS
    CALL DELAY_1MS
    ;segunda coluna
    BCF PORTB,RB1;2580
    BTFSS TRISD,RD0;0
    CALL MOV0
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD1;8
    CALL MOV8
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD2;5
    CALL MOV5
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD3;2
    CALL MOV2
    CALL DELAY_1MS
    CALL DELAY_1MS
    BSF PORTB,RB1
    CALL DELAY_1MS
    CALL DELAY_1MS
    ;terceira coluna
    BCF PORTB,RB2;369#
    CALL DIVIDE
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD0;#
    CALL START_CRONOS
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD1;9
    CALL MOV9
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD2;6
    CALL MOV6
    CALL DELAY_1MS
    CALL DELAY_1MS
    BTFSS TRISD,RD3;3
    CALL MOV3
    CALL DELAY_1MS
    CALL DELAY_1MS
    BSF PORTB,RB2
    CALL DELAY_1MS
    CALL DELAY_1MS
    GOTO MAIN_LOOP; loop forever
CHANGE_VALUE
    BTFSC CHECK,0
    CALL DEZ
    BTFSS CHECK,0
    MOVWF COUNT_D
    INCF CHECK,1
    RETURN 
DEZ
    MOVWF COUNT_U
    RETURN
MOV0
    MOVLW D'0'
    CALL CHANGE_VALUE
    RETURN
MOV1
    MOVLW D'1'
    CALL CHANGE_VALUE
    RETURN
MOV2
    MOVLW D'2'
    CALL CHANGE_VALUE
    RETURN
MOV3
    MOVLW D'3'
    CALL CHANGE_VALUE
    RETURN
MOV4
    MOVLW D'4'
    CALL CHANGE_VALUE
    RETURN
MOV5
    MOVLW D'5'
    CALL CHANGE_VALUE
    RETURN
MOV6
    MOVLW D'6'
    CALL CHANGE_VALUE
    RETURN
MOV7
    MOVLW D'7'
    CALL CHANGE_VALUE
    RETURN
MOV8
    MOVLW D'8'
    CALL CHANGE_VALUE
    RETURN
MOV9
    MOVLW D'9'
    CALL CHANGE_VALUE
    RETURN
MONITOR1
    MOVLW B'00000100'
    MOVWF  PORTA
    RETURN

MONITOR2
    MOVLW B'00001000'
    MOVWF PORTA
    RETURN

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
#ENDIF    